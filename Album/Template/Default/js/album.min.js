function Waterfall(b){this.id="string"==typeof b.container?document.getElementById(b.container):b.container;this.colWidth=b.colWidth;this.colCount=b.colCount;this.cls=b.cls&&""!=b.cls?b.cls:"photo";this.init()}
Waterfall.prototype={getByClass:function(b,d){var e=[];b=new RegExp("(^|\\s+)"+b+"(\\s+|$)","g");d=d.getElementsByTagName("*");for(var a=d.length,c=0;c<a;c++)b.test(d[c].className)&&(e.push(d[c]),b.lastIndex=0);return e},maxArr:function(b){for(var d=b.length,e=b[0],a=1;a<d;a++)e<b[a]&&(e=b[a]);return e},getMar:function(b){var d=0;b.currentStyle?d=parseInt(b.currentStyle.marginBottom):document.defaultView&&(d=parseInt(document.defaultView.getComputedStyle(b,null).marginBottom));return d},getMinCol:function(b){for(var d=
b.length,e=b[0],a=0,c=0;c<d;c++)e>b[c]&&(e=b[c],a=c);return a},init:function(){for(var b=[],d=this.getByClass(this.cls,this.id),e=d.length,a=0;a<this.colCount;a++)b[a]=0;for(a=0;a<e;a++)d[a].h=d[a].offsetHeight+this.getMar(d[a]);for(a=0;a<e;a++){var c=this.getMinCol(b);d[a].style.left=c*this.colWidth+"px";d[a].style.top=b[c]+"px";b[c]+=d[a].h}this.id.style.height=this.maxArr(b)+"px"}};
function imgshow(b){this.waitFor=b;this.image=this.div=null;this.waitInterval=this.showInterval=0;this.visible=!1;this.waitInitialize=function(){clearInterval(this.waitInterval);this.initialize()};this.initialize=function(){var e=this;this.div=document.createElement("div");this.div.id="photoshow";document.body.appendChild(this.div);this.div_sidebar=document.createElement("div");this.div_sidebar.id="photoshow_sidebar";this.div.appendChild(this.div_sidebar);this.div_close=document.createElement("div");
this.div_close.id="photoshow_close";this.div_close.ClassName="photoshow_close";this.div.appendChild(this.div_close);for(var a=document.getElementsByTagName("a"),c=0;c<a.length;c++){var f=a[c];"photourl"==f.className&&(f.onclick=function(g){g.preventDefault();return e.show(this)})}};this.showCallback=function(){if(this.image&&(0<this.image.width||this.image.complete)&&0<this.image.width){clearInterval(this.showInterval);if(self.pageYOffset)var e=self.pageYOffset;else document.documentElement&&document.documentElement.scrollTop?
e=document.documentElement.scrollTop:document.body&&(e=document.body.scrollTop);var a=this.image.width/this.image.height;this.image.height>document.documentElement.clientHeight&&(this.image.height=document.documentElement.clientHeight-80,this.image.width=this.image.height*a);this.image.width>document.documentElement.clientWidth-220&&(this.image.width=document.documentElement.clientWidth-220,this.image.height=this.image.width/a);this.div.style.top=Math.max(e+(document.documentElement.clientHeight-
this.image.height+40)/2,0)+"px";this.div.style.left=Math.max((document.documentElement.clientWidth-this.image.width-4-200)/2,0)+"px";this.div.style.width=this.image.width+206+"px";this.div.style.height=this.image.height+6+"px";400>this.image.height&&(this.div.style.cssText="background-position-x:"+400*a/2+"px;line-height:400px;",this.div.style.height="400px",this.div.style.width=400*a+200+"px",this.div.style.top=Math.max(e+(document.documentElement.clientHeight-400)/2,0)+"px",this.div.style.left=
Math.max((document.documentElement.clientWidth-400*a-200)/2,0)+"px");this.div.style.display="block"}};this.show=function(e){if(this.visible)return this.hide(),!1;this.image=new Image;this.image.src=e.href;this.image.onclick=function(){return d.hide()};this.div_close.onclick=function(){return d.hide()};this.div.appendChild(this.image);var a=eval("("+e.id+")"),c="<div>\u5c3a\u5bf8<span>"+a.size+"</span></div><div>\u5bbd\u5ea6<span>"+a.width+"px</span></div><div>\u9ad8\u5ea6<span>"+a.height+"px</span></div>";
a.camera&&(c="<div>\u76f8\u673a<span>"+a.camera+"</span></div><div>\u955c\u5934<span>"+a.lens+"</span></div><div>\u5149\u5708<span>"+a.aperture+"</span></div><div>\u5feb\u95e8<span>"+a.shutterSpeed+"</span></div><div>\u7126\u8ddd<span>"+a.focalLength+"mm</span></div><div>\u611f\u5149<span>"+a.ISO+"</span></div><div>\u65f6\u95f4<span>"+a.time+"</span></div>"+c);a.url&&(c='<div>\u6765\u6e90<span><a href="'+a.url+'" target="_bank">\u67e5\u770b\u6587\u7ae0</a></span></div>'+c);a.description&&(c='<div>\u6765\u6e90<span><a href="http://'+
a.description+'" target="_bank">'+a.description+"</a></span></div>"+c);this.div_sidebar.innerHTML='<div class="div_sidebar_title">\u56fe\u7247\u63cf\u8ff0</div><div class="div_sidebar_content">'+e.title+'</div><div class="div_sidebar_title">\u56fe\u7247\u4fe1\u606f</div><div class="div_sidebar_content">'+c+"</div>";this.div_close.innerHTML="\u5173\u95ed\u56fe\u7247";this.div.style.cssText="background-position-x:200px";this.div.style.width="600px";this.div.style.height="400px";if(self.pageYOffset)var f=
self.pageYOffset;else document.documentElement&&document.documentElement.scrollTop?f=document.documentElement.scrollTop:document.body&&(f=document.body.scrollTop);this.div.style.top=Math.max(f+(document.documentElement.clientHeight-404)/2,0)+"px";this.div.style.left=Math.max((document.documentElement.clientWidth-604)/2,0)+"px";this.div.style.display="block";this.showInterval=setInterval(function(){d.showCallback()},10);this.visible=!0;return!1};this.hide=function(){this.div.style.display="none";this.div.removeChild(this.image);
this.image=null;this.visible=!1};var d=this;this.waitInterval=setInterval(function(){d.waitInitialize()},100)};
